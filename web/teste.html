<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script>
    var myTable="";
    myTable="<table class=\"table table-striped table-hover table-condensed\"><thead><tr>";
    myTable+="<th>ID</th>";
    myTable+="<th>Título</th>";
    myTable+="<th>Autor</th>";
    myTable+="<th>Ano</th>";
    myTable+="<th>Preço</th>";
    myTable+="<th>Editora</th>";
    myTable+="<th>Foto</th>";
    myTable+="</tr></thead>";
    myTable+="<tbody>";

    function createXMLHttpRequest(){ 
                // See http://en.wikipedia.org/wiki/XMLHttpRequest 
                // Provide the XMLHttpRequest class for IE 5.x-6.x: 
                if( typeof XMLHttpRequest == "undefined" ) XMLHttpRequest = function() {
                    try {
                        return new ActiveXObject("Msxml2.XMLHTTP.6.0") 
                    } catch(e) {}
                    try {
                        return new ActiveXObject("Msxml2.XMLHTTP.3.0") 
                    } catch(e) {}
                    try {
                        return new ActiveXObject("Msxml2.XMLHTTP") 
                    } catch(e) {}
                    try {
                        return new ActiveXObject("Microsoft.XMLHTTP") 
                    } catch(e) {}
                    throw new Error( "This browser does not support XMLHttpRequest." ) 
                };
                return new XMLHttpRequest(); 
            } 
            var AJAX = createXMLHttpRequest();
            function handler() {
                if(AJAX.readyState == 4 && AJAX.status == 200) {
                    var jarr = eval('(' + AJAX.responseText +')');
                    var i=0;
                    for (i in jarr) {
                        myTable+="<tr>";
                        myTable+="<td>"+jarr[i].id+"</td>";
                        myTable+="<td>"+jarr[i].titulo+"</td>";
                        myTable+="<td>"+jarr[i].autor+"</td>";
                        myTable+="<td>"+jarr[i].ano+"</td>";
                        myTable+="<td>"+jarr[i].preco+"</td>";
                        myTable+="<td>"+jarr[i].editora+"</td>";
                        myTable+="<td>"+jarr[i].foto+"</td>";
                        myTable+="</tr>";
                    }
                    myTable+="</tbody></table>";
                    document.getElementById("result").innerHTML = myTable;
    
                }else if (AJAX.readyState == 4 && AJAX.status != 200) {
                    alert('Something went wrong...'); 
                } 
            } 
            function show(){
                AJAX.onreadystatechange = handler;
                AJAX.open("GET", "atualizaLivro");
                AJAX.send(""); 
            };
</script>        
    </head>
    <body>
        <div>
            
<a href="#" onclick="show()">Click here to get JSON data from the server side</a>
</div>
        <div id="result"></div>
    </body>
</html>
